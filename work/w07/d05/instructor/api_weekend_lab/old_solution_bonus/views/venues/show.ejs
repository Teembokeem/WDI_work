<!DOCTYPE html>
<html>
  <%- include('../_head'); %>
  <style type="text/css">
      #map {
        height: 300px;
        width: 300px;
      }
  </style>
<body>
  <%- include('../_header'); %>

  <p><a href="/">&lt; Back to search form.</a></p>

  <div class="venue">
    <h2><%= venue.name %></h2>
    <p><%- venue.location.formattedAddress.join('<br>') %></p>
    <% if (venue.url) { %>
      <p><a href="<%= venue.url %>">Visit their website!</a></p>
    <% } %>

    <div id="map"></div>
  </div>

  <script type="text/javascript">
    var map;
    function initMap() {
      var latLng = {
        lat: <%= venue.location.lat %>,
        lng: <%= venue.location.lng %>
      };

      map = new google.maps.Map(document.getElementById('map'), {
        center: latLng,
        zoom: 14
      });

      var marker = new google.maps.Marker({
        position: latLng,
        map: map,
        title: "<%= venue.name %>"
      });
    }
  </script>

  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=<%= process.env.GOOGLE_MAPS_KEY %>&callback=initMap">
  </script>
</body>
</html>
